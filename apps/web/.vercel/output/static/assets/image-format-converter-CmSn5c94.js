import{c as S,r as l,j as e}from"./main-By2XImYZ.js";import{J as Z}from"./jszip.min-CKIGh7jZ.js";import{T as $}from"./ToolInfo-Y3yLY6IQ.js";import{I as J}from"./IconCloudUpload-BsdkTJKl.js";import{I as C}from"./IconDownload-BaLnwbNK.js";import{I as W}from"./IconCircleX-eLHa6kfp.js";import{I as V}from"./IconLock-CZHgUM-0.js";import{I as B}from"./IconArrowsExchange-hqN9KXqB.js";const _=[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]],z=S("outline","box","Box",_);function ee(){const p=l.useRef(null),[i,I]=l.useState("png"),[o,c]=l.useState([]),[x,g]=l.useState(!1),[u,f]=l.useState(!1),[b,v]=l.useState(!1),y=[{value:"png",label:"PNG",mime:"image/png"},{value:"jpeg",label:"JPEG",mime:"image/jpeg"},{value:"webp",label:"WebP",mime:"image/webp"},{value:"avif",label:"AVIF",mime:"image/avif"}],j=l.useCallback(t=>{const n=Array.from(t).filter(s=>s.type.startsWith("image/"));if(n.length===0){alert("Please select valid image files");return}const a=n.map((s,d)=>({id:`${Date.now()}-${d}`,file:s,name:s.name,originalFormat:s.type.split("/")[1]?.toUpperCase()||"Unknown",status:"pending",preview:URL.createObjectURL(s),ext:s.name.split(".").pop()?.toLowerCase()||"jpg"}));c(a)},[]),U=t=>{const r=t.target.files;r&&r.length>0&&j(r)},F=t=>{t.preventDefault(),g(!0)},k=t=>{t.preventDefault(),g(!1)},P=t=>{t.preventDefault(),g(!1);const r=t.dataTransfer.files;r.length>0&&j(r)},R=async t=>new Promise((r,n)=>{const a=new Image;a.onload=()=>{try{const s=document.createElement("canvas");s.width=a.width,s.height=a.height;const d=s.getContext("2d");if(!d){n(new Error("Failed to get canvas context"));return}d.drawImage(a,0,0);const N=y.find(m=>m.value===i);if(!N){n(new Error("Unsupported format"));return}s.toBlob(m=>{if(m){const O=URL.createObjectURL(m);c(G=>G.map(h=>h.id===t.id?{...h,status:"completed",downloadUrl:O,blob:m}:h)),r()}else n(new Error("Failed to convert image"))},N.mime,.9)}catch(s){n(s)}finally{URL.revokeObjectURL(a.src)}},a.onerror=()=>{n(new Error("Failed to load image")),URL.revokeObjectURL(a.src)},a.src=URL.createObjectURL(t.file)}),L=async t=>{if(t.length!==0){f(!0);for(const r of t)try{c(n=>n.map(a=>a.id===r.id?{...a,status:"converting"}:a)),await R(r)}catch(n){c(a=>a.map(s=>s.id===r.id?{...s,status:"error",error:n.message}:s))}f(!1)}},D=t=>{if(!t.downloadUrl)return;const r=document.createElement("a");r.href=t.downloadUrl,r.download=`${t.name.split(".")[0]}.${i}`,document.body.appendChild(r),r.click(),document.body.removeChild(r)},A=async()=>{const t=o.filter(r=>r.status==="completed"&&r.blob);if(t.length===0){alert("No converted files available for download");return}v(!0);try{const r=new Z;for(const s of t)if(s.blob){const d=`${s.name.split(".")[0]}.${i}`;r.file(d,s.blob)}const n=await r.generateAsync({type:"blob"}),a=document.createElement("a");a.href=URL.createObjectURL(n),a.download=`converted_images_${i.toUpperCase()}_${Date.now()}.zip`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)}catch(r){console.error("Error creating ZIP file:",r),alert("Failed to create ZIP file")}finally{v(!1)}},E=()=>{o.forEach(t=>{t.downloadUrl&&URL.revokeObjectURL(t.downloadUrl),t.preview&&URL.revokeObjectURL(t.preview)}),c([]),p.current&&(p.current.value="")};l.useEffect(()=>{const t=o.filter(r=>r.status==="pending");t.length>0&&!u&&L(t)},[o,u]),l.useEffect(()=>{o.length>0&&c(t=>t.map(r=>(r.downloadUrl&&URL.revokeObjectURL(r.downloadUrl),{...r,status:"pending",downloadUrl:void 0,blob:void 0})))},[i]);const w=o.filter(t=>t.status==="completed").length;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-800 to-slate-900 pt-24 pb-8 px-4 flex flex-col items-center justify-between",children:[e.jsxs("div",{className:"w-full max-w-6xl flex-1 flex flex-col items-center justify-center mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-100 mb-2",children:["Image ",e.jsx("span",{className:"text-brand-primary",children:"Format"})," Converter"]}),e.jsx("p",{className:"text-md text-gray-200",children:"Convert images between formats instantly. Batch support. No uploadsâ€”100% private."})]}),e.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg p-4 sm:p-8 mb-6 w-full max-w-5xl",children:o.length===0?e.jsxs(e.Fragment,{children:[e.jsx("div",{onDragOver:F,onDragLeave:k,onDrop:P,className:`border-3 border-dashed rounded-lg p-12 text-center transition-all duration-300 ${x?"border-brand-primary bg-brand-primary/20":"border-gray-600 hover:border-brand-primary/40 hover:bg-gray-700"}`,children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(J,{className:`w-16 h-16 ${x?"text-brand-primary":"text-gray-400"} transition-colors`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-medium text-gray-100 mb-2",children:x?"Drop your images here":"Drag & drop your images here"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"or"}),e.jsx("button",{onClick:()=>p.current?.click(),className:"text-sm px-3 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-hover transition-colors duration-200 font-medium shadow-md hover:shadow-lg",children:"Choose Files"})]})]})}),e.jsx("p",{className:"text-center text-gray-400 text-xs mt-3 flex items-center justify-center gap-1",children:"ðŸ”’ Your files stay on your device. Nothing is uploaded to any server."}),e.jsx("input",{type:"file",accept:"image/*",ref:p,className:"hidden",multiple:!0,onChange:U})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-100 mb-4",children:"Conversion Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-200 mb-2",children:"Convert to:"}),e.jsx("select",{value:i,onChange:t=>I(t.target.value),className:"px-3 py-2 border border-gray-600 rounded-lg bg-gray-700 text-gray-100 focus:outline-none focus:ring-2 focus:ring-brand-primary",children:y.map(t=>e.jsx("option",{value:t.value,className:"bg-gray-700",children:t.label},t.value))})]})]}),e.jsxs("div",{className:"w-full flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-100 mb-4",children:["Files (",o.length,")"]}),o.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:E,className:"px-4 py-2 text-red-400 hover:bg-red-900/20 rounded-lg transition-colors duration-200",children:"Clear All"})})})]}),e.jsx("div",{className:"space-y-3",children:o.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg bg-gray-700",children:[e.jsx("div",{className:"mr-4 flex-shrink-0",children:e.jsx("img",{src:t.preview,alt:t.name,className:"w-16 h-16 object-contain rounded-md"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"font-medium text-gray-100 truncate",children:t.name}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-600 text-gray-300 rounded",children:[t.originalFormat," â†’ ",i.toUpperCase()]})]}),t.error&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:t.error})]}),e.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[t.status==="pending"&&e.jsx("span",{className:"text-gray-400 text-sm",children:"Pending"}),t.status==="converting"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-brand-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-brand-primary text-sm",children:"Converting..."})]}),t.status==="completed"&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{onClick:()=>D(t),className:"px-3 py-1 bg-green-700 text-green-100 text-sm rounded hover:bg-green-600 transition-colors",children:e.jsx(C,{className:"w-4 h-4"})})}),t.status==="error"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-red-400 text-sm",children:"Failed"})]})]})]},t.id))}),w>0&&e.jsx("div",{className:"mt-6 w-full flex justify-end",children:e.jsx("button",{onClick:A,disabled:b,className:"px-4 py-2 bg-green-700 text-green-100 rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 font-medium shadow-md hover:shadow-lg flex items-center space-x-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-green-300 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Creating ZIP..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4"}),e.jsxs("span",{children:["Download ZIP (",w,")"]})]})})})]})}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-gray-400 text-xs",children:[e.jsx("sup",{children:"*"}),"All major formats supported: JPG, PNG, GIF, SVG, WebP & AVIF."]})})]}),e.jsx($,{title:"Image Format Converter",description:"Our Image Format Converter allows you to seamlessly switch between popular image formats like JPEG, PNG, WebP, and AVIF. Whether you need to optimize for web performance with WebP/AVIF or maintain maximum compatibility with JPEG, this tool provides a fast and private solution directly in your browser.",features:[{title:"Batch Processing",description:"Convert multiple images at once and download them all as a single ZIP file, saving you valuable time.",icon:z},{title:"Client-Side Only",description:"Conversions are performed entirely on your machine. Your private images never touch our servers.",icon:V},{title:"High Compatibility",description:"Convert between all modern web formats including PNG, JPG, WebP, and the next-gen AVIF format.",icon:B}],steps:[{title:"Upload Images",description:"Drag and drop one or more images into the upload area or click select."},{title:"Select Target Format",description:"Choose your desired output format (PNG, JPEG, WebP, or AVIF) from the dropdown."},{title:"Automatic Conversion",description:"The tool will instantly begin converting each image to your chosen format."},{title:"Download Results",description:"Download individual converted images or grab everything at once as a ZIP archive."}]}),e.jsx("div",{className:"mt-8",children:e.jsxs("p",{className:"text-gray-400 text-xs text-center",children:["Crafted with care by"," ",e.jsx("a",{href:"https://sidme.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"text-brand-primary hover:text-brand-hover transition-colors",children:"sidme"})]})})]})}export{ee as component};
