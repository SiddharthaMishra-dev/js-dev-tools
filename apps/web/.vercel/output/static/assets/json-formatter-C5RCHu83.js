import{c as L,r as l,j as e}from"./main-CGnZi2mW.js";import{T as Q}from"./ToolInfo-ChjwnJNV.js";import{I as O}from"./IconBraces-CGHHPoEb.js";import{I}from"./IconArrowsMinimize-BpnYUMbM.js";import{I as U,a as B}from"./IconCopy-nZX32LSj.js";import{I as F}from"./IconDownload-BlcyTgN5.js";import{I as P}from"./IconTrash-BBTua1sG.js";import"./IconLock-BM8DZ9_V.js";const _=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],q=L("outline","alert-circle","AlertCircle",_);function te(){const[o,N]=l.useState(""),[b,g]=l.useState(null),[w,S]=l.useState(!1),[f,j]=l.useState("formatted"),[c,k]=l.useState(!1),{formattedJson:d,minifiedJson:u,tokens:C,parsedData:p}=l.useMemo(()=>{if(!o.trim())return{formattedJson:"",minifiedJson:"",tokens:[],parsedData:null};try{const t=A(o);g(null);const s=JSON.stringify(t,null,2),a=JSON.stringify(t),m=c?J(s):s,h=c?J(a):a;return{formattedJson:m,minifiedJson:h,tokens:M(m),parsedData:t}}catch(t){return g(t.message),{formattedJson:"",minifiedJson:"",tokens:[],parsedData:null}}},[o,c]);function J(t){return t.replace(/"([^"\\]*(?:\\.[^"\\]*)*)"/g,"'$1'")}function $(t){return t.replace(/'([^'\\]*(?:\\.[^'\\]*)*)'/g,'"$1"')}function A(t){try{return JSON.parse(t)}catch(s){try{const a=$(t);return JSON.parse(a)}catch{throw s}}}function M(t){const s=[],a=c?"'":'"',m=c?"\\\\.|[^'\\\\]":'\\\\.|[^"\\\\]',h=new RegExp(`(${a}(?:${m})*${a})\\s*:|(${a}(?:${m})*${a})|(-?\\d+\\.?\\d*(?:[eE][+-]?\\d+)?)|(\\btrue\\b|\\bfalse\\b)|(\\bnull\\b)|([\\[\\]{}])|([,:])`,"g");let r,x=0;for(;(r=h.exec(t))!==null;){if(r.index>x){const y=t.slice(x,r.index);y&&s.push({type:"punctuation",value:y})}r[1]?s.push({type:"key",value:r[1]}):r[2]?s.push({type:"string",value:r[2]}):r[3]?s.push({type:"number",value:r[3]}):r[4]?s.push({type:"boolean",value:r[4]}):r[5]?s.push({type:"null",value:r[5]}):r[6]?s.push({type:"bracket",value:r[6]}):r[7]&&s.push({type:"punctuation",value:r[7]}),x=h.lastIndex}return x<t.length&&s.push({type:"punctuation",value:t.slice(x)}),s}function T(t){switch(t){case"bracket":return"text-blue-400 font-bold";case"key":return"text-cyan-400";case"string":return"text-green-400";case"number":return"text-orange-400";case"boolean":return"text-purple-400";case"null":return"text-purple-400";default:return"text-gray-300"}}const V=l.useCallback(async()=>{const t=f==="formatted"?d:u;if(t)try{await navigator.clipboard.writeText(t),S(!0),setTimeout(()=>S(!1),2e3)}catch(s){console.error("Failed to copy:",s)}},[f,d,u]),z=l.useCallback(()=>{if(!p)return;let t;if(Array.isArray(p))t=p;else if(typeof p=="object")t=[p];else{g("JSON must be an object or array of objects to convert to CSV");return}if(t.length===0){g("JSON array is empty");return}const s=new Set;t.forEach(n=>{typeof n=="object"&&n!==null&&Object.keys(n).forEach(i=>s.add(i))});const a=Array.from(s);if(a.length===0){g("No valid keys found in JSON");return}const m=n=>{if(n==null)return"";const i=typeof n=="object"?JSON.stringify(n):String(n);return i.includes(",")||i.includes('"')||i.includes(`
`)?`"${i.replace(/"/g,'""')}"`:i},r=[a.join(","),...t.map(n=>a.map(i=>m(n?.[i]??"")).join(","))].join(`
`),x=new Blob([r],{type:"text/csv;charset=utf-8;"}),y=URL.createObjectURL(x),v=document.createElement("a");v.href=y,v.download="data.csv",v.click(),URL.revokeObjectURL(y)},[p]),E=()=>{N(""),g(null)},R=()=>{d&&(N(d),j("formatted"))},D=()=>{u&&(N(u),j("minified"))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-800 to-slate-900 pt-24 pb-8 px-4 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-100 mb-2",children:["JSON ",e.jsx("span",{className:"text-blue-400",children:"Formatter"})]}),e.jsx("p",{className:"text-md text-gray-200",children:"Format, validate & minify JSON instantly. No data sent to serversâ€”completely private."})]}),e.jsxs("div",{className:"flex-1 max-w-9xl w-full mx-auto",children:[e.jsx("div",{className:"bg-gray-800 rounded-xl shadow-lg p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-700 text-gray-100 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Quotes:"}),e.jsx("button",{onClick:()=>k(!1),className:`px-2 py-1 text-xs rounded transition-colors ${c?"bg-gray-600 text-gray-300 hover:bg-gray-500":"bg-blue-700 text-blue-100"}`,children:'"'}),e.jsx("button",{onClick:()=>k(!0),className:`px-2 py-1 text-xs rounded transition-colors ${c?"bg-blue-700 text-blue-100":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:"'"})]}),e.jsxs("button",{onClick:R,disabled:!o.trim()||!!b,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-blue-100 rounded-lg hover:bg-blue-600 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Format"})]}),e.jsxs("button",{onClick:D,disabled:!o.trim()||!!b,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-700 text-blue-100 rounded-lg hover:bg-blue-600 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:"Minify"})]}),e.jsx("button",{onClick:V,disabled:!d,className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed ${w?"bg-green-800 text-green-200":"bg-gray-700 text-gray-100 hover:bg-gray-600"}`,children:w?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]})}),e.jsxs("button",{onClick:z,disabled:!p,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-700 text-gray-100 rounded-lg hover:bg-gray-600 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:"Download CSV"})]}),e.jsxs("button",{onClick:E,disabled:!o,className:"inline-flex items-center gap-2 px-4 py-2 bg-red-900 text-red-200 rounded-lg hover:bg-red-800 transition-colors duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear"})]})]})}),b&&e.jsxs("div",{className:"bg-red-900/30 border border-red-700 rounded-xl p-4 mb-6 flex items-start gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-red-300",children:[e.jsx("p",{className:"font-medium",children:"Invalid JSON"}),e.jsx("p",{className:"text-sm opacity-80",children:b})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Input"}),e.jsx("textarea",{value:o,onChange:t=>N(t.target.value),placeholder:'Paste your JSON here, e.g., {"name": "John", "age": 30}',className:`w-full h-96 p-4 border rounded-lg bg-gray-700 text-gray-100 font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ${b?"border-red-500":"border-gray-600"}`,spellCheck:!1}),o&&e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Size: ",new Blob([o]).size.toLocaleString()," bytes"]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Output"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j("formatted"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${f==="formatted"?"bg-blue-700 text-blue-100":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Formatted"}),e.jsx("button",{onClick:()=>j("minified"),className:`px-3 py-1 text-sm rounded-lg transition-colors ${f==="minified"?"bg-blue-700 text-blue-100":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Minified"})]})]}),e.jsx("pre",{className:"w-full h-96 p-4 border border-gray-600 rounded-lg bg-gray-900 font-mono text-sm overflow-auto",style:{tabSize:2},children:f==="formatted"?C.length>0?C.map((t,s)=>e.jsx("span",{className:T(t.type),children:t.value},s)):e.jsx("span",{className:"text-gray-500",children:"Formatted JSON will appear here..."}):u?e.jsx("span",{className:"text-gray-300 break-all",children:u}):e.jsx("span",{className:"text-gray-500",children:"Minified JSON will appear here..."})}),d&&e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Size:"," ",new Blob([f==="formatted"?d:u]).size.toLocaleString()," ","bytes"]})]})]}),e.jsx(Q,{title:"JSON Formatter & Validator",description:"Our JSON Formatter is a comprehensive suite for developers to clean, validate, and optimize JSON data. Whether you need to beautify deep nested objects for readability or minify data for production use, this tool provides a secure, client-side environment for all your JSON needs.",features:[{title:"Smart Formatting",description:"Automatic indentation and syntax highlighting make scanning complex JSON structures effortless.",icon:O},{title:"Instant Minification",description:"Strip whitespaces and newlines to reduce payload size for API calls and configuration files.",icon:I},{title:"CSV Export",description:"Convert arrays of JSON objects into CSV format instantly for spreadsheet analysis.",icon:F}],steps:[{title:"Paste JSON",description:"Input your raw JSON string into the left editor panel. It can even handle single quotes!"},{title:"Auto-Validate",description:"The tool immediately checks for syntax errors and provides helpful debugging messages."},{title:"Apply View",description:'Switch between "Formatted" and "Minified" views to see your data in different contexts.'},{title:"Export Data",description:"Copy the result to your clipboard or download the data as a CSV file for external use."}]})]}),e.jsx("footer",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-400 text-xs",children:["Crafted with care by"," ",e.jsx("a",{href:"https://sidme.vercel.app/",target:"_blank",rel:"noopener noreferrer",className:"text-brand-primary hover:text-brand-hover transition-colors",children:"sidme"})]})})]})}export{te as component};
